// PRIMITIVES
import { CenteredGridLayout } from "components/primitive/CenteredGridLayout.slint";
import { EZStreamButton, EZStreamTextButton } from "components/primitive/EZStreamButton.slint";
import { EZStreamTextInput } from "components/primitive/EZStreamTextInput.slint";

// WIDGETS
import { EZStreamScoreInput } from "components/EZStreamScoreInput.slint";

// FONT
import "./res/Figtree_VariableFont_wght.ttf";

// ENUMS/STRUCTS
import { CharacterData } from "data/CharacterData.slint";
import { PlayerType } from "data/PlayerEnum.slint";

// GLOBALS
import { EZStreamWindowPreferences as WP } from "WindowPreferences.slint";

// SEPARATE WINDOWS
import { EZStreamCharacterSelectScreen } from "css_screen/CharacterSelectScreen.slint";

export component MainWindow inherits Window {
    title: "EZ-Stream";
    width: 600px;
    height: 300px;

    callback player-1-tag-changed(new-text: string);
    callback player-2-tag-changed(new-text: string);
    callback player-1-score-changed(new-score: int);
    callback player-2-score-changed(new-score: int);

    callback player-1-css-button-clicked();
    callback player-2-css-button-clicked();

    background: WP.color-scheme.background-color;

    CenteredGridLayout {
        vertical-spacing: 3px;

        // ---- TOP ROW ---- //

        HorizontalLayout {
            alignment: center;
            row: 2;
            col: 0;
        
            EZStreamTextInput {
                placeholder-text: "Player 1 Tag";
                font-size: WP.font-size;
                width: 200px;
                height: 20px;
                text-changed(new-text) => player-1-tag-changed(new-text);
            }
        }

        HorizontalLayout {
            alignment: center;
            row: 2;
            col: 2;

            EZStreamTextInput {
                placeholder-text: "Player 2 Tag";
                font-size: WP.font-size;
                width: 200px;
                height: 20px;
                text-changed(new-text) => player-2-tag-changed(new-text);
            }
        }


        // ---- SECOND ROW ---- //

        HorizontalLayout {
            row: 3;
            col: 0;
            alignment: center;
        
            EZStreamScoreInput {
                score-changed(new-score) => { player-1-score-changed(new-score); }
            }
        }

        HorizontalLayout {
            row: 3;
            col: 2;
            alignment: center;

            EZStreamScoreInput {
                score-changed(new-score) => { player-2-score-changed(new-score); }
            }
        }

        HorizontalLayout {
            row: 4;
            col: 0;
            alignment: center;

            EZStreamTextButton {
                label: "Player 1 Character Select";
                pressed => {
                    player-1-css-button-clicked();
                }
            }
        }

        HorizontalLayout {
            row: 4;
            col: 2;
            alignment: center;

            EZStreamTextButton {
                label: "Player 2 Character Select";
                pressed => {
                    player-2-css-button-clicked();
                }
            }
        }

        // ---- BOTTOM ROW ---- //

        HorizontalLayout {
            row: 9;
            col: 1;
            alignment: center;

            EZStreamTextButton {
                width: 150px;
                height: 50px;
                label: "UPDATE";
            }
        }
    }
}

export {
    PlayerType,
    CharacterData,
    WP as EZStreamWindowPreferences,

    EZStreamCharacterSelectScreen,
}
